<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Android,sharedPreference,浮动按钮,获取任务列表,开机启动,">





  <link rel="alternate" href="/atom.xml" title="Wossoneri`s Blog" type="application/atom+xml">






<meta name="description" content="在Android众多工具类app中，`Last App Switcher`绝对算是一个让人用过就不会卸载的工具。`LAS`这个应用，它的功能很简单，就是通过一个浮动按钮实现在两个应用之间一键切换，但是非常实用，尤其是在边玩边聊天需要频繁切换应用的时候。所以可以看出，想开发一款受欢迎的应用，一定要注重用户体验，只要用户用的爽，功能再再再简单，它也会受欢迎。那么这功能到底有多简单呢？跟我来实现一下就好">
<meta name="keywords" content="Android,sharedPreference,浮动按钮,获取任务列表,开机启动">
<meta property="og:type" content="article">
<meta property="og:title" content="[Android] 仿照 Last App Switcher 写的小程序">
<meta property="og:url" content="http://wossoneri.github.io/2015/06/08/[Android]A-Demo-Of-Last-App-Switcher/index.html">
<meta property="og:site_name" content="Wossoneri`s Blog">
<meta property="og:description" content="在Android众多工具类app中，`Last App Switcher`绝对算是一个让人用过就不会卸载的工具。`LAS`这个应用，它的功能很简单，就是通过一个浮动按钮实现在两个应用之间一键切换，但是非常实用，尤其是在边玩边聊天需要频繁切换应用的时候。所以可以看出，想开发一款受欢迎的应用，一定要注重用户体验，只要用户用的爽，功能再再再简单，它也会受欢迎。那么这功能到底有多简单呢？跟我来实现一下就好">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://images.cnblogs.com/cnblogs_com/rossoneri/682731/o_unnamed.png">
<meta property="og:image" content="http://images.cnblogs.com/cnblogs_com/rossoneri/682731/o_1.png">
<meta property="og:updated_time" content="2016-01-03T13:10:41.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[Android] 仿照 Last App Switcher 写的小程序">
<meta name="twitter:description" content="在Android众多工具类app中，`Last App Switcher`绝对算是一个让人用过就不会卸载的工具。`LAS`这个应用，它的功能很简单，就是通过一个浮动按钮实现在两个应用之间一键切换，但是非常实用，尤其是在边玩边聊天需要频繁切换应用的时候。所以可以看出，想开发一款受欢迎的应用，一定要注重用户体验，只要用户用的爽，功能再再再简单，它也会受欢迎。那么这功能到底有多简单呢？跟我来实现一下就好">
<meta name="twitter:image" content="http://images.cnblogs.com/cnblogs_com/rossoneri/682731/o_unnamed.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '6234852363740382000',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://wossoneri.github.io/2015/06/08/[Android]A-Demo-Of-Last-App-Switcher/">





  <title>[Android] 仿照 Last App Switcher 写的小程序 | Wossoneri`s Blog</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-70716047-2', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?0af9c6850b24b42a4713ad1c9c691675";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <a href="https://github.com"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/121cd7cbdc3e4855075ea8b558508b91ac463ac2/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_green_007200.png"></a>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Wossoneri`s Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">业 精于勤而荒于嬉，行 成于思而毁于随</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wossoneri.github.io/2015/06/08/[Android]A-Demo-Of-Last-App-Switcher/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Wossoneri">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/11764431?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wossoneri`s Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">[Android] 仿照 Last App Switcher 写的小程序</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-06-08T15:32:42+08:00">
                2015-06-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Android/" itemprop="url" rel="index">
                    <span itemprop="name">Android</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2015/06/08/[Android]A-Demo-Of-Last-App-Switcher/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count gitment-comments-count" data-xid="/2015/06/08/[Android]A-Demo-Of-Last-App-Switcher/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          
          
	
  		  <span class="post-letters-count">
            &nbsp; | &nbsp;
            <span class="post-meta-item-icon">
                 <i class="fa fa-clock-o"></i>
            </span>
		        <span class="post-meta-item-text">总记</span>
            <span class="post-count">2,987 字</span>
		        <span class="post-meta-item-text">读完需要</span>
    		    <span class="post-count">12 分</span>
  		  </span>
           
         

          

          

          
              <div class="post-description">
                  在Android众多工具类app中，`Last App Switcher`绝对算是一个让人用过就不会卸载的工具。`LAS`这个应用，它的功能很简单，就是通过一个浮动按钮实现在两个应用之间一键切换，但是非常实用，尤其是在边玩边聊天需要频繁切换应用的时候。所以可以看出，想开发一款受欢迎的应用，一定要注重用户体验，只要用户用的爽，功能再再再简单，它也会受欢迎。那么这功能到底有多简单呢？跟我来实现一下就好了。
              </div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>&emsp;&emsp;在Android众多工具类app中，<code>Last App Switcher</code>绝对算是一个让人用过就不会卸载的工具。<code>LAS</code>这个应用，它的功能很简单，就是通过一个浮动按钮实现在两个应用之间一键切换，但是非常实用，尤其是在边玩边聊天需要频繁切换应用的时候。所以可以看出，想开发一款受欢迎的应用，一定要注重用户体验，只要用户用的爽，功能再再再简单，它也会受欢迎。那么这功能到底有多简单呢？跟我来实现一下就好了。</p>
<p><a href="https://github.com/wossoneri/LAS_Demo" target="_blank" rel="noopener">项目代码地址</a>:<a href="https://github.com/wossoneri/LAS_Demo" target="_blank" rel="noopener">https://github.com/wossoneri/LAS_Demo</a></p>
<p>&emsp;&emsp;我就不截图了，下面用官方的截图来说明。这里真心推荐读者下载用一下。谷歌商店的下载地址：<a href="https://play.google.com/store/apps/details?id=com.abhi.lastappswitcher" title="Last App Switcher" target="_blank" rel="noopener">Last App Switcher</a> 搞开发的应该都会翻墙吧</p>
<p>看下原始程序界面：<br><img src="http://images.cnblogs.com/cnblogs_com/rossoneri/682731/o_unnamed.png" alt="LAS Main View"></p>
<p>&emsp;&emsp;可以看到主界面就是一系列开关选项，同时程序右边有一个浮动的圆形窗口。下面我会按照步骤一步步增加功能。</p>
<h2 id="仿iOS按钮"><a href="#仿iOS按钮" class="headerlink" title="仿iOS按钮"></a>仿iOS按钮</h2><p>&emsp;&emsp;写demo不需要多好的界面，但也不能太丑，手里有看起来不错的控件就直接拖进来用了。下面是效果图，这一套按钮有好几种，都是仿iOS的，想要的可以点原作者的<a href="http://blog.csdn.net/vipzjyno1/article/details/23707149#comments" title="SwitchButton 开关按钮 的多种实现方式 （附源码DEMO）" target="_blank" rel="noopener">这篇博客</a>，源码<a href="https://github.com/ikew0ng/SwitchButton" target="_blank" rel="noopener">Github地址</a>。</p>
<p>先添加一个开关主功能的按钮：<br><img src="http://images.cnblogs.com/cnblogs_com/rossoneri/682731/o_1.png" alt="初始界面"></p>
<h2 id="浮动按钮"><a href="#浮动按钮" class="headerlink" title="浮动按钮"></a>浮动按钮</h2><p>&emsp;&emsp;可以看到，这个应用的主要功能就在于那个红色的浮动按钮上面。根据程序功能可以知道，这个浮动按钮是由程序开启的服务中创建的。又因为程序的Activity在离开onStart()状态后就会销毁(这样做的原因后面说)，之后按钮仍保持其可用状态。所以可以知道是通过startService()启动的服务。下面我们就需要先写一个服务出来，再在服务中绘一个浮动按钮。具体有关服务的细节参考我上一篇博客：<a href="http://www.cnblogs.com/rossoneri/p/4530216.html" title="[Android] Service服务详解以及如何使service服务不被杀死" target="_blank" rel="noopener">博客传送门</a>。</p>
<p>写一个服务<code>FloatButtonService</code>，在AndroidManifest.xml文件添加服务<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">service</span> <span class="attr">android:name</span>=<span class="string">".FloatButtonService"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>服务中添加绘制浮动按钮方法，相关说明见注释<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">createFloatView</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>方法添加完毕在服务相应的调用位置创建和销毁浮动按钮<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">	<span class="keyword">super</span>.onCreate();</span><br><span class="line">	createFloatView();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">	<span class="keyword">super</span>.onDestroy();</span><br><span class="line">	<span class="keyword">if</span> (mFloatLayout != <span class="keyword">null</span>) &#123;</span><br><span class="line">		mWindowManager.removeView(mFloatLayout);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>使用浮动按钮还需要增加权限：<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.SYSTEM_ALERT_WINDOW"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>这样，我们在MainActivity中就可以为按钮增加响应事件，进行开启和关闭服务了。</p>
<h2 id="将程序从最近任务-last-recent-tasks-中移除"><a href="#将程序从最近任务-last-recent-tasks-中移除" class="headerlink" title="将程序从最近任务(last recent tasks)中移除"></a>将程序从最近任务(last recent tasks)中移除</h2><p>&emsp;&emsp;按下系统导航栏第三个按钮我们就可以看到最近使用过的任务列表，当然，LAS切换程序也是在这里选择最后使用的两个应用程序切换的。所以在切换的时候，把自己的Activity从最近的任务中删掉是很必要的。<br>前面提到过，就是在Activity的onPause()状态或者onStop()状态中执行finishAndRemoveTask()方法删除任务。但这个方法在API 21也就是Android 5.0才引入。不过，我们还有一个更方便的方法，就是在配置文件的<code>&lt;activity&gt;</code>标签中增加<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">android:excludeFromRecents="true"</span><br></pre></td></tr></table></figure></p>
<p>这样不论你是按下back键还是home键，程序都会从最近使用过的任务列表中删除</p>
<h2 id="获取系统任务列表，进行任务间的切换"><a href="#获取系统任务列表，进行任务间的切换" class="headerlink" title="获取系统任务列表，进行任务间的切换"></a>获取系统任务列表，进行任务间的切换</h2><p>&emsp;&emsp;将自身Activity从最近任务列表中删除后，我们就可以考虑获取最后两次的任务，然后互相一键切换了。<br>在浮动按钮的单击事件中添加<br>首先需要获得ActivityManager的对象<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">ActivityManager mActivityManager = (ActivityManager) <span class="keyword">this</span>.getSystemService(Context.ACTIVITY_SERVICE);</span><br></pre></td></tr></table></figure></p>
<p>要获取任务还需要对应权限<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.GET_TASKS"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>有了权限，就可以获取到任务列表了<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;ActivityManager.RecentTaskInfo&gt; mAppList = <span class="keyword">new</span> ArrayList&lt;ActivityManager.RecentTaskInfo&gt;();</span><br><span class="line">mAppList = mActivityManager.getRecentTasks(<span class="number">3</span>, ActivityManager.RECENT_IGNORE_UNAVAILABLE);</span><br></pre></td></tr></table></figure></p>
<p>建立一个装有<code>RecentTaskInfo</code>的列表，通过<code>getRecentTasks</code>方法获取系统的最近使用过的应用列表。</p>
<p>关于<code>getRecentTasks</code>方法，第一个参数是一个整型值，是你需要返回的应用数量，但实际上得到的数量可能会比这个值要小。比如<br>我要得到3个，但后台只开了1个，那么只返回1个。第二个参数是要返回的应用的状态，我选择的是忽略不可用的应用，应该是完全关闭，不在后台的应用。</p>
<p>再说一点，这个方法在Android5.0因为安全问题屏蔽掉了，也就是android5.0以上的版本不能用这个方法。所以我前一阵子在App Store上看到评论都是Android5.0用这个没有效果。现在行不行我倒不知道，闲了再研究吧。（每次我说闲了再做基本都是个坑- -|）</p>
<p>前面的参数我之所以要选择3，是因为我只需要获得最近使用的2个应用，因为每次开新应用，这个应用信息都会存在列表的最上面，所以获取前3个即可。</p>
<p>但为什么是3而不是2呢，因为Android的Home界面也是一个Activity（应该是），我可以选择是否要在切换的时候忽略掉Home界面。所以考虑到Home，就要用3。<br>Home的包名为<code>com.android.launcher</code>，以此为根据进行判断即可。<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">getAndStartIntent</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">	ActivityManager.RecentTaskInfo info = mAppList.get(i);</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">null</span> == info)</span><br><span class="line">		Toast.makeText(FloatButtonService.<span class="keyword">this</span>, <span class="string">"No other apps"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(sp.getBoolean(StringKey.ExcludeHome, <span class="keyword">false</span>))&#123; <span class="comment">// if set true, do follow func</span></span><br><span class="line">		<span class="keyword">if</span>(info.baseIntent.getComponent().getPackageName().equals(HOME_PACKAGE))	<span class="comment">//exclude HOME</span></span><br><span class="line">			getAndStartIntent(<span class="number">2</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span></span><br><span class="line">		startActivityWithoutAnimation(info);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>启动一个应用的过程默认是有一个切换动画的，我们的程序就是用来切换程序的，所以取消启动动画是一个比较好的选择。<br>只用给要启动的intent加一个flag即可（有些情况下不会生效）<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);</span><br></pre></td></tr></table></figure></p>
<h2 id="开机启动"><a href="#开机启动" class="headerlink" title="开机启动"></a>开机启动</h2><p>&emsp;&emsp;Android开机启动结束会发送一个BOOT_COMPLETED的广播，我们在程序中建立一个广播接收器来接收这个广播，接收成功就直接启动服务来显示浮动按钮即可。<br>先建立一个广播接收器 BootReceiver<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BootReceiver</span> <span class="keyword">extends</span> <span class="title">BroadcastReceiver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">if</span> (intent.getAction().equals(<span class="string">"android.intent.action.BOOT_COMPLETED"</span>)) &#123;<span class="comment">// on boot</span></span><br><span class="line">			Intent a = <span class="keyword">new</span> Intent(context, FloatButtonService.class);</span><br><span class="line">			context.startService(a);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在配置文件中，<code>&lt;application&gt;</code>标签下注册广播接收器<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">receiver</span> <span class="attr">android:name</span>=<span class="string">".BootReceiver"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.BOOT_COMPLETED"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>然后增加权限<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.RECEIVE_BOOT_COMPLETED"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>开机启动就完成了。但怎么用开关来控制其是否开机启动呢？</p>
<h2 id="SharedPreferences"><a href="#SharedPreferences" class="headerlink" title="SharedPreferences"></a>SharedPreferences</h2><p>&emsp;&emsp;用开关控制功能的开启状态，这个状态不能保存在程序中，因为程序是要被关闭的。那么就是要用一些方法保存开关的状态到系统中，然后服务从文件读取状态，控制自己的程序行为。Android中最适合保存配置状态的就是用SharedPreferences了。当我查看LAS应用的数据文件的时候，发现输出的结果的确是这样的。<br><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cat /data/data/com.abhi.lastappswitcher/shared_prefs/com.inpen.lastAppSwitcher.APPLICATION_PREFS.xml</span><br></pre></td></tr></table></figure></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">&lt;?xml version='1.0' encoding='utf-8' standalone='yes' ?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">boolean</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_SNAP_TO_EDGE"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_LAND_HEIGHT"</span> <span class="attr">value</span>=<span class="string">"800"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_LAND_FLOATER_Y"</span> <span class="attr">value</span>=<span class="string">"485"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_LAND_WIDTH"</span> <span class="attr">value</span>=<span class="string">"1280"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_PORT_FLOATER_Y"</span> <span class="attr">value</span>=<span class="string">"776"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_PORT_WIDTH"</span> <span class="attr">value</span>=<span class="string">"800"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">boolean</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_ERROR_MSG"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">boolean</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_STATUS_BAR_OVERLAY"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_FLOATER_SIZE"</span> <span class="attr">value</span>=<span class="string">"55"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_PORT_FLOATER_X"</span> <span class="attr">value</span>=<span class="string">"765"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_PORT_HEIGHT"</span> <span class="attr">value</span>=<span class="string">"1280"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_FLOATER_TRANSPARENCY"</span> <span class="attr">value</span>=<span class="string">"75"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"currentQuote"</span> <span class="attr">value</span>=<span class="string">"6"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_SWITCHING_METHOD"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">boolean</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_FLOATER_MOVABLE"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">boolean</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_HAPTIC_FEEDBACK"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">int</span> <span class="attr">name</span>=<span class="string">"com.inpen.lastAppSwitcher.PREF_FLOATER_COLOR"</span> <span class="attr">value</span>=<span class="string">"0"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>那么，我们就可以根据自己的需求来写sharedPreferences文件了<br>先获得 SharedPreferences 的实例<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">SharedPreferences sp = getSharedPreferences(<span class="string">"las_demo"</span>, Context.MODE_PRIVATE);</span><br></pre></td></tr></table></figure></p>
<p>参数1是不带后缀的文件名，根据文件名获取实例，同一个名字的SharedPreferences对象只获得同一个实例；<br>参数2是模式操作模式：</p>
<ul>
<li><font color="green">Context.MODE_PRIVATE:</font><br>  为默认操作模式，代表该文件是私有数据，只能被应用本身访问，在该模式下，写入的内容会覆盖原文件的内容。</li>
<li><font color="green">Context.MODE_APPEND:</font><br>  创建的文件是私有数据，该模式会检查文件是否存在，存在就往文件追加内容，否则就创建新文件。</li>
<li><font color="green">MODE_WORLD_READABLE:</font><br>  表示当前文件可以被其他应用读取。</li>
<li><font color="green">MODE_WORLD_WRITEABLE:</font><br>  表示当前文件可以被其他应用写入。</li>
</ul>
<p>获得实例之后要进行初始化，写入一些设定值。这里因为初始化只需要一次，但我没找到判断sharedPreferences文件是否存在的方法(没想用File去查，这个文件存在系统路径，有权限问题，估计不行，有知道的可以告诉我)，有一个<code>public abstract boolean contains (String key)</code>方法，但用了感觉没效果，所以我又加了一个key，来保存第一次创建的状态，然后写入其他键-值，保存。<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(!sp.getBoolean(StringKey.FirstCreate, <span class="keyword">true</span>))&#123;</span><br><span class="line"></span><br><span class="line">	Editor editor = sp.edit();</span><br><span class="line">	editor.putBoolean(StringKey.FirstCreate, <span class="keyword">true</span>);</span><br><span class="line">	editor.putBoolean(StringKey.RunAtStart, <span class="keyword">false</span>);</span><br><span class="line">	editor.putBoolean(StringKey.SnapToEdge, <span class="keyword">true</span>);</span><br><span class="line">	editor.putBoolean(StringKey.StatusBarOverlay, <span class="keyword">false</span>);</span><br><span class="line">	editor.putBoolean(StringKey.ExcludeHome, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">	editor.commit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>设置好键-值后就可以根据这些值设置界面里按钮的开关状态和设置程序的一些行为。<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (sp.getBoolean(StringKey.RunAtStart, <span class="keyword">false</span>))</span><br><span class="line">	mBtnRunAtStartup.setChecked(<span class="keyword">true</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	mBtnRunAtStartup.setChecked(<span class="keyword">false</span>);</span><br></pre></td></tr></table></figure></p>
<p>当然，在手动改变按钮状态的时候也要为某个key重新写入新的value<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">mBtnRunAtStartup.setOnCheckedChangeListener(<span class="keyword">new</span> OnCheckedChangeListener() &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCheckedChanged</span><span class="params">(CompoundButton buttonView, <span class="keyword">boolean</span> isChecked)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">if</span> (isChecked)</span><br><span class="line">			editBoolKey(StringKey.RunAtStart, <span class="keyword">true</span>);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			editBoolKey(StringKey.RunAtStart, <span class="keyword">false</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">editBoolKey</span><span class="params">(String str, <span class="keyword">boolean</span> b)</span> </span>&#123;</span><br><span class="line">	Editor editor = sp.edit();</span><br><span class="line">	editor.putBoolean(str, b);</span><br><span class="line">	editor.apply();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>改SharedPreferences的key-value的时候需要获得editor对象实例，设置完成用apply()方法或者commit()方法提交修改。如果有两个editor实例在同时修改，则以最后一次的提交为准。如果不关心返回值，且在应用的主线程里使用，用apply()要比commit()好。<br>至此，需要开关功能就在功能实现的地方加一层读取SP键值的过程，根据读到的结果决定功能。是否可用。</p>
<h2 id="悬浮按钮显示在status-bar上方"><a href="#悬浮按钮显示在status-bar上方" class="headerlink" title="悬浮按钮显示在status bar上方"></a>悬浮按钮显示在status bar上方</h2><p>&emsp;&emsp;按照下面设置windowManager的属性就好，没什么好解释的，放上文档看吧。<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">wmParams.flags = LayoutParams.FLAG_NOT_TOUCH_MODAL</span><br><span class="line">			   | LayoutParams.FLAG_NOT_FOCUSABLE</span><br><span class="line">			   | LayoutParams.FLAG_LAYOUT_IN_SCREEN;</span><br></pre></td></tr></table></figure></p>
<ul>
<li><font color="green">int android.view.WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL = 32 [0x20]</font><br>  Window flag: Even when this window is focusable (its is not set), allow any pointer events outside of the window to be sent to the windows behind it. Otherwise it will consume all pointer events itself, regardless of whether they are inside of the window.</li>
<li><p><font color="green">int android.view.WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE = 8 [0x8]</font><br>  Window flag: this window won’t ever get key input focus, so the user can not send key or other button events to it. Those will instead go to whatever focusable window is behind it. This flag will also enable FLAG_NOT_TOUCH_MODAL whether or not that is explicitly set.</p>
<p>  Setting this flag also implies that the window will not need to interact with a soft input method, so it will be Z-ordered and positioned independently of any active input method (typically this means it gets Z-ordered on top of the input method, so it can use the full screen for its content and cover the input method if needed. You can use FLAG_ALT_FOCUSABLE_IM to modify this behavior.</p>
</li>
<li><font color="green">int android.view.WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN = 256 [0x100]</font><br>  Window flag: place the window within the entire screen, ignoring decorations around the border (a.k.a. the status bar). The window must correctly position its contents to take the screen decoration into account. This flag is normally set for you by Window as described in Window.setFlags.</li>
</ul>
<h2 id="按钮边缘吸附效果"><a href="#按钮边缘吸附效果" class="headerlink" title="按钮边缘吸附效果"></a>按钮边缘吸附效果</h2><p>&emsp;&emsp;这个应该是最简单的了，在按钮的touch事件中，当移动结束，手指抬起行为ACTION_UP中对位置进行判断，如果按钮的x坐标在屏幕左半边，x设为0，即贴着屏幕左边缘显示，反之一个道理。</p>
<p>功能就粗略地实现了这么多，原应用中还有很多小功能就不一一实现了，代码我传到github了，地址点<a href="https://github.com/wossoneri/LAS_Demo" target="_blank" rel="noopener">这里</a></p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="https://github.com/wossoneri/wossoneri.github.io/blob/master/pay/wechatpay.JPG?raw=true" alt="Wossoneri 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="https://github.com/wossoneri/wossoneri.github.io/blob/master/pay/alipay.JPG?raw=true" alt="Wossoneri 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    Wossoneri
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://wossoneri.github.io/2015/06/08/[Android]A-Demo-Of-Last-App-Switcher/" title="[Android] 仿照 Last App Switcher 写的小程序">http://wossoneri.github.io/2015/06/08/[Android]A-Demo-Of-Last-App-Switcher/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Android/" rel="tag"><i class="fa fa-tag"></i> Android</a>
          
            <a href="/tags/sharedPreference/" rel="tag"><i class="fa fa-tag"></i> sharedPreference</a>
          
            <a href="/tags/浮动按钮/" rel="tag"><i class="fa fa-tag"></i> 浮动按钮</a>
          
            <a href="/tags/获取任务列表/" rel="tag"><i class="fa fa-tag"></i> 获取任务列表</a>
          
            <a href="/tags/开机启动/" rel="tag"><i class="fa fa-tag"></i> 开机启动</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2015/05/26/[Android]Detail-of-Service/" rel="next" title="[Android] Service服务详解以及如何使service服务不被杀死">
                <i class="fa fa-chevron-left"></i> [Android] Service服务详解以及如何使service服务不被杀死
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2015/06/22/[iOS]Install-OSX-in-Vmware-under-Win8/" rel="prev" title="[iOS] Win8下在Vmware11中安装使用苹果系统OS X 10.10">
                [iOS] Win8下在Vmware11中安装使用苹果系统OS X 10.10 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      
        <div id="gitment-container"></div>
      
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://avatars2.githubusercontent.com/u/11764431?v=3&s=460" alt="Wossoneri">
            
              <p class="site-author-name" itemprop="name">Wossoneri</p>
              <p class="site-description motion-element" itemprop="description">就怕你一生碌碌无为，还安慰自己平凡可贵</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">113</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">116</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/wossoneri" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-globe"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://weibo.com/u/1171637315/home?topnav=1&wvr=5" target="_blank" title="Weibo">
                    
                      <i class="fa fa-fw fa-globe"></i>Weibo</a>
                </span>
              
            
          </div>

          
          
            <div class="cc-license motion-element" itemprop="license">
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank">
                <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons">
              </a>
            </div>
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-globe"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.cnblogs.com/rossoneri/" title="我的博客园博客" target="_blank">我的博客园博客</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://zhangqinglian.github.io/" title="清廉的Android博客" target="_blank">清廉的Android博客</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#仿iOS按钮"><span class="nav-number">1.</span> <span class="nav-text">仿iOS按钮</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#浮动按钮"><span class="nav-number">2.</span> <span class="nav-text">浮动按钮</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#将程序从最近任务-last-recent-tasks-中移除"><span class="nav-number">3.</span> <span class="nav-text">将程序从最近任务(last recent tasks)中移除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获取系统任务列表，进行任务间的切换"><span class="nav-number">4.</span> <span class="nav-text">获取系统任务列表，进行任务间的切换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#开机启动"><span class="nav-number">5.</span> <span class="nav-text">开机启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SharedPreferences"><span class="nav-number">6.</span> <span class="nav-text">SharedPreferences</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#悬浮按钮显示在status-bar上方"><span class="nav-number">7.</span> <span class="nav-text">悬浮按钮显示在status bar上方</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#按钮边缘吸附效果"><span class="nav-number">8.</span> <span class="nav-text">按钮边缘吸附效果</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Wossoneri</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  







<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    

    
      <script type="text/javascript">
      function renderGitment(){
        var gitment = new Gitmint({
            id: '1433748762000', 
            owner: 'wossoneri',
            repo: 'wossoneri.github.io',
            
            lang: "" || navigator.language || navigator.systemLanguage || navigator.userLanguage,
            
            oauth: {
            
            
                client_secret: '9d7241035e9211e280e753883f5b8f5a1a49bf77',
            
                client_id: '40b6c719a11e3fca29e8'
            }});
        gitment.render('gitment-container');
      }

      
      renderGitment();
      
      </script>
    







  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
